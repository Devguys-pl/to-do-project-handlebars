<!-- Login Modal -->

<div
  class="modal fade"
  id="signinModal"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
  aria-labelledby="staticBackdropLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Sign in</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form action="/user/login" method="POST">
          <div class="form-group">
            <label for="exampleInputEmail1">Email address</label>
            <input
              type="email"
              class="form-control"
              aria-describedby="emailHelp"
              placeholder="Enter email"
              name="email"
              autocomplete="username"
            />
          </div>
          <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input
              type="password"
              class="form-control"
              placeholder="Password"
              name="password"
              autocomplete="current-password"
            />
          </div>

          <div class="modal-footer">
            <button type="submit" class="btn btn-outline-light btn-sm">Log in</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Register Modal -->

<div
  class="modal fade"
  id="signupModal"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
  aria-labelledby="staticBackdropLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Sign up</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form action="/user/create" method="POST">
          <div class="form-group">
            <label for="exampleInputEmail1">Email address</label>
            <input
              type="email"
              class="form-control"
              aria-describedby="emailHelp"
              placeholder="Enter email"
              name="email"
              autocomplete="username"
            />
          </div>
          <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input
              type="password"
              class="form-control"
              placeholder="Password"
              name="password"
              autocomplete="new-password"
            />
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-outline-light btn-sm">Sign up</button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>

<!-- Login / Register buttons -->

<div class="container">
  <div class="row py-1 loginRegisterDiv">
    <div class="col-sm loginRegisterCol">
      {{#if isLogged}}
        <h5>Welcome</h5>
        <a href="/user/logout" class="btn btn-outline-light btn-sm">Log out</a>
      {{/if}}
      {{#if (checkIsLogged isLogged)}}
        <button
          type="button"
          class="btn btn-outline-light btn-sm"
          data-bs-toggle="modal"
          data-bs-target="#signinModal"
        >
          Sign in
        </button>
        <button
          type="button"
          class="btn btn-outline-light btn-sm"
          data-bs-toggle="modal"
          data-bs-target="#signupModal"
        >
          Sign up
        </button>
      {{/if}}
    </div>
  </div>

  {{#if (checkIsLogged isLogged)}}
    <div class="alert alert-warning" role="alert">
      <div><i class="fa-solid fa-triangle-exclamation fa-2x"></i></div>
      <div>{{{message.userNotLogged}}}</div>
    </div>
  {{/if}}

  {{#if message.successLogin}}
    <div class="alert alert-info" role="alert">
      <div><i class="fa-solid fa-circle-info fa-2x"></i></div>
      <div>{{{message.successLogin}}}</div>
    </div>
  {{/if}}
  {{! NOT WORKING }}
  {{#if message.successRegister}}
    <div class="alert alert-info" role="alert">
      <div><i class="fa-solid fa-circle-info fa-2x"></i></div>
      <div>{{{message.successRegister}}}</div>
    </div>
  {{/if}}
  {{! NOT WORKING - INSTEAD SHOWING UP message.userNotLogged }}
  {{#if message.successLogout}}
    <div class="alert alert-info" role="alert">
      <div><i class="fa-solid fa-circle-info fa-2x"></i></div>
      <div>{{{message.successLogout}}}</div>
    </div>
  {{/if}}
  {{! NOT WORKING }}
  {{#if message.somethingWrong}}
    <div class="alert alert-warning" role="alert">
      <div><i class="fa-solid fa-triangle-exclamation fa-2x"></i></div>
      <div>{{{message.somethingWrong}}}</div>
    </div>
  {{/if}}
  {{! BUGGED }}
  {{!-- {{#if message.emptyField}}
    {{{message.emptyField}}}
  {{/if}} --}}

  {{! CANT EXECUTE DATABASE NOT WORKING }}
  {{#if message.successTaskCreated}}
    <div class="alert alert-info" role="alert">
      <div><i class="fa-solid fa-circle-info fa-2x"></i></div>
      <div>{{{message.successTaskCreated}}}</div>
    </div>
  {{/if}}

  {{! CANT EXECUTE DATABASE NOT WORKING }}
  {{#if message.successfulTaskRemoved}}
    <div class="alert alert-info" role="alert">
      <div><i class="fa-solid fa-circle-info fa-2x"></i></div>
      <div>{{{message.successfulTaskRemoved}}}</div>
    </div>
  {{/if}}

  {{! CANT EXECUTE DATABASE NOT WORKING }}
  {{#if message.unSuccessfulTaskRemoved}}
    <div class="alert alert-warning" role="alert">
      <div><i class="fa-solid fa-triangle-exclamation fa-2x"></i></div>
      <div>{{{message.unSuccessfulTaskRemoved}}}</div>
    </div>
  {{/if}}

  {{#if message.successfulChangeTaskStatus}}
    <div class="alert alert-info" role="alert">
      <div><i class="fa-solid fa-circle-info fa-2x"></i></div>
      <div>{{{message.successfulChangeTaskStatus}}}</div>
    </div>
  {{/if}}

  {{! Cannot read properties of undefined (reading 'password') }}
  {{#if message.userNotExist}}
    <div class="alert alert-warning" role="alert">
      <div><i class="fa-solid fa-triangle-exclamation fa-2x"></i></div>
      <div>{{{message.userNotExist}}}</div>
    </div>
  {{/if}}

  {{! NOT WORKING }}
  {{#if message.userExist}}
    <div class="alert alert-warning" role="alert">
      <div><i class="fa-solid fa-triangle-exclamation fa-2x"></i></div>
      <div>{{{message.userExist}}}</div>
    </div>
  {{/if}}

  <!-- Header -->

  <div class="row py-5">
    <div class="col-11">
      <h1>T O D O</h1>
    </div>
    <div class="col-1">
      <!-- <i class="fa-regular fa-sun"></i> -->
    </div>
  </div>
  <!-- New task Container -->

  <div class="row my-5 addTaskContainer">
    {{#if (checkIsLogged isLogged)}}
      <form action="/todo/create/localStorage" method="POST">
        <div class="col my-1">
          <button type="submit" class="addTaskBtn btn btn-light mx-4">+</button>
          <input
            name="taskTitle"
            class="addTaskInpt my-4 ms-4"
            type="text"
            placeholder="Create new task..."
          />
        </div>
      </form>
    {{/if}}
    {{#unless (checkIsLogged isLogged)}}
      <form action="/todo/create" method="POST">
        <div class="col my-1">
          <button type="submit" class="addTaskBtn btn btn-light mx-4">+</button>
          <input
            name="taskTitle"
            class="addTaskInpt my-4 ms-4"
            type="text"
            placeholder="Create new task..."
          />
        </div>
      </form>
    {{/unless}}
  </div>

  <!-- <a href="/todo/active" class="btn btn-light my-3 mx-4 completeBtn">✓</a> -->
  <!-- Task List -->
  <div class="row tasks">
    {{#each todosList}}
      <div class="col-1">
        {{#unless (checkIsComplete this.status)}}
          <a
            href="/todo/status/{{{this.id}}}"
            id="{{{this.id}}}"
            class="btn btn-light my-3 mx-4 completeBtn"
          >✓</a>
        {{/unless}}
        {{#if (checkIsComplete this.status)}}
          <a
            href="/todo/status/{{{this.id}}}"
            id="{{{this.id}}}"
            class="btn btn-light my-3 mx-4 checkedCompleteBtn"
          >✓</a>
        {{/if}}
      </div>
      <div class="col-2">
        <p class="my-4 createdAt">{{{this.createdAt}}}</p>
      </div>
      <div class="col-8">
        <p class="my-4">{{{this.taskTitle}}} Status: {{{this.status}}}</p>
      </div>
      <div class="col-1 dots-icon">
        <i class="fa-solid fa-ellipsis p-2 m-3"></i>
      </div>
    {{/each}}
  </div>
  <!-- Task info / Navbar -->

  <div class="row tasksInfo">
    <hr class="hr" />
    <div class="col ms-5 pt-3">
      <p class="itemsLeft"> items left</p>
    </div>
    <div class="col-2 pt-3">
      <a href="/home" class="navbarP">All</a>
    </div>
    <div class="col-2 pt-3">
      <a href="/todo/Active" class="navbarP">Active</a>
    </div>
    <div class="col-2 pt-3">
      <a href="/todo/Completed" class="navbarP">Completed</a>
    </div>
    <div class="col me-5 pt-3 clear-completed">
      <a href="/todo/remove/completedTasks" class="navbarP">Clear Completed</a>
    </div>
  </div>
</div>